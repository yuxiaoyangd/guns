# 抖音小游戏 - 射击冒险

## 游戏简介
这是一个竖屏射击小游戏，包含首页升级系统，玩家可以升级武器、购买道具，然后进入游戏打击朝角色移动的怪物获得金币和分数。

## 游戏特色
- 🎮 竖屏操作，适合手机游戏
- 🏠 首页升级系统，可升级武器属性
- 🧙‍♂️ 角色固定在屏幕下方中央
- 🎯 三种武器系统：手枪、步枪、手雷
- 👹 怪物朝角色移动，接触后消失
- 💰 击败怪物获得金币奖励
- 🎨 现代化UI设计，渐变背景和卡片式布局
- 🔫 子弹数量限制系统
- 🎯 点击怪物进行精确射击
- ✨ 精美的视觉效果和动画

## 游戏玩法

### 基本操作
1. **首页操作**：升级武器、开始游戏
2. **角色位置**：角色固定在屏幕下方中央，不可移动
3. **武器使用**：点击下方道具栏的武器即可使用
4. **攻击怪物**：点击怪物进行精确射击，或使用武器自动射击

### 武器系统
- **手枪**：基础武器，伤害20，射程200，6发子弹，连发模式
- **步枪**：进阶武器，伤害35，射程300，射速更快，10发子弹，连发模式
- **手雷**：范围武器，伤害80，射程150，可同时攻击多个怪物，1个

### 游戏机制
- 角色固定在屏幕下方中央，不可移动
- 点击武器开始自动射击
- 点击怪物进行精确射击
- 怪物朝角色缓慢移动，接触角色造成5点伤害后消失
- 击败怪物获得100分和1-5个金币
- 子弹数量有限，用完撤下武器
- 点击空白处可切换瞄准目标
- 怪物死亡后自动切换目标
- 一波怪物消灭后自动生成下一波
- 每波怪物血量递增，难度提升
- 角色固定位置，子弹自动瞄准怪物
- 道具1.5秒自动补充一次

## 技术特点
- 使用抖音小游戏API开发
- Canvas 2D渲染
- 触摸拖拽交互
- 碰撞检测系统
- 粒子效果和爆炸动画
- 子弹数量管理系统
- 渐变背景和阴影效果
- 卡片式UI设计
- 响应式布局

## 文件结构
```
guns/
├── game.js          # 主游戏逻辑（完整版）
├── main.js          # 简化版游戏启动文件
├── test.js          # 测试版本
├── test_touch.js    # 触摸事件测试版本
├── test_weapon.js   # 武器使用测试版本
├── game.json        # 游戏配置
├── project.config.json  # 项目配置
├── icon.png         # 游戏图标
├── config.js        # 游戏配置文件
├── audio.js         # 音频管理
├── index.js         # 游戏入口文件
└── README.md        # 说明文档
```

## 开发环境
- 抖音开发者工具
- 支持ES6语法
- Canvas 2D API

## 运行方式
1. 使用抖音开发者工具打开项目
2. 编译并预览
3. 在抖音小游戏环境中运行

## 游戏规则详解

### 角色位置规则
- 角色Y坐标固定在屏幕下方（距离底部150像素）
- 角色不可移动，保持固定位置
- 使用武器时角色会暂停移动

### 怪物系统
- 怪物生成在屏幕上方
- 怪物朝角色缓慢移动
- 根据血量显示不同颜色（健康/受伤/重伤）
- 怪物接触角色造成5点伤害后消失
- 点击怪物可进行精确射击

### 武器和子弹系统
- **手枪**：6发子弹，基础伤害，连发模式
- **步枪**：10发子弹，中等伤害，射速快，连发模式
- **手雷**：1个，范围伤害
- 子弹用完后撤下武器，需要重新点击
- 道具栏显示当前子弹数量
- 点击武器开始自动射击，用完自动停止
- 子弹自动瞄准当前目标怪物
- 道具1.5秒自动补充一次

### 游戏进程
- 游戏分为多个波次，每波5个怪物
- 每波怪物血量递增，难度提升
- 一波怪物消灭后自动生成下一波
- 游戏持续进行，直到角色生命值归零
- 游戏结束后显示最终分数、金币和波次
- 点击"返回主菜单"按钮重新开始游戏

## 故障排除

### 游戏无法显示
如果游戏启动后没有显示，请尝试以下解决方案：

1. **检查控制台输出**
   - 打开开发者工具的控制台
   - 查看是否有错误信息
   - 确认Canvas尺寸是否正确设置

2. **使用测试版本**
   - 先运行 `test.js` 测试基本功能
   - 再运行 `test_touch.js` 测试触摸事件
   - 再运行 `test_weapon.js` 测试武器使用
   - 再运行 `main.js` 测试简化版游戏
   - 最后运行完整的 `game.js`

3. **常见问题**
   - Canvas尺寸为0：检查系统信息获取
   - 触摸事件不响应：检查事件绑定
   - 游戏循环不运行：检查requestAnimationFrame

4. **调试步骤**
   ```javascript
   // 在控制台检查
   console.log('Canvas尺寸:', canvas.width, 'x', canvas.height);
   console.log('系统信息:', tt.getSystemInfoSync());
   console.log('游戏状态:', gameState);
   ```

### 性能优化
- 使用 `requestAnimationFrame` 而不是 `setInterval`
- 合理控制游戏对象数量
- 优化渲染循环

## 游戏截图
游戏包含以下主要界面：
- 主游戏界面：角色、固定怪物、武器道具栏
- 游戏结束界面：显示最终分数和金币
- 胜利界面：击败所有怪物后显示
- 道具栏：三种武器，显示子弹数量

## 更新日志
- v1.0.0 初始版本，包含基础射击玩法
- v1.1.0 更新游戏规则，角色固定下方可移动，怪物固定位置
- v1.2.0 添加自动瞄准系统，连发子弹，无限道具
- v1.3.0 优化游戏机制，子弹用完撤下武器，添加波次系统
- v1.4.0 添加道具自动补充和角色自动对准功能
- v1.5.0 简化操作方式，角色固定位置，怪物朝角色移动
- v1.6.0 进一步简化操作，改为点击道具即可使用
- v1.7.0 添加首页升级系统，角色和道具居中显示，点击射击功能
- v1.8.0 全面优化UI设计，现代化界面风格，渐变背景和卡片布局
- 支持三种武器系统，添加子弹数量限制
- 完整的游戏循环和计分系统
- 添加故障排除和测试版本

## 技术支持
如果遇到问题，请：
1. 检查控制台错误信息
2. 确认抖音小游戏环境正常
3. 尝试运行测试版本
4. 查看开发者工具的网络和性能面板
