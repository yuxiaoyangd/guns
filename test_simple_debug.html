<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æç®€è°ƒè¯•ç‰ˆæµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        .info-panel {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 2000;
            max-width: 300px;
        }
        
        .controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 2000;
        }
        
        button {
            background: #27AE60;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            margin: 2px;
            font-size: 12px;
        }
        
        button:hover {
            background: #229954;
        }
        
        .status {
            margin: 5px 0;
            padding: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="info-panel">
        <h3>ğŸ”§ æç®€è°ƒè¯•ç‰ˆ</h3>
        <div class="status">
            <strong>çŠ¶æ€:</strong> <span id="gameStatus">åˆå§‹åŒ–ä¸­...</span>
        </div>
        <div class="status">
            <strong>è§¦æ‘¸åæ ‡:</strong> <span id="touchCoords">ç­‰å¾…è§¦æ‘¸...</span>
        </div>
        <div class="status">
            <strong>é¼ æ ‡åæ ‡:</strong> <span id="mouseCoords">ç­‰å¾…ç§»åŠ¨...</span>
        </div>
        <div class="status">
            <strong>æŒ‰é’®ä½ç½®:</strong> <span id="buttonPos">è®¡ç®—ä¸­...</span>
        </div>
    </div>
    
    <div class="controls">
        <h4>æ§åˆ¶</h4>
        <button onclick="restartGame()">ğŸ”„ é‡å¯</button>
        <button onclick="toggleDebug()">ğŸ› è°ƒè¯•</button>
        <button onclick="clearConsole()">ğŸ§¹ æ¸…ç©º</button>
        <button onclick="showHelp()">â“ å¸®åŠ©</button>
    </div>

    <script>
        let gameInstance = null;
        let debugMode = true;
        
        // å¯åŠ¨æ¸¸æˆ
        function startGame() {
            try {
                // æ¸…ç©ºé¡µé¢
                const existingCanvas = document.querySelector('canvas');
                if (existingCanvas) {
                    existingCanvas.remove();
                }
                
                // åˆ›å»ºæ¸¸æˆå®ä¾‹
                gameInstance = new SimpleDebug();
                
                // æ›´æ–°çŠ¶æ€
                document.getElementById('gameStatus').textContent = 'æ¸¸æˆè¿è¡Œä¸­';
                
                console.log('âœ… æç®€è°ƒè¯•ç‰ˆå¯åŠ¨æˆåŠŸ');
                
            } catch (error) {
                console.error('âŒ æ¸¸æˆå¯åŠ¨å¤±è´¥:', error);
                document.getElementById('gameStatus').textContent = 'å¯åŠ¨å¤±è´¥: ' + error.message;
            }
        }
        
        // é‡å¯æ¸¸æˆ
        function restartGame() {
            if (gameInstance) {
                gameInstance = null;
            }
            setTimeout(startGame, 100);
        }
        
        // åˆ‡æ¢è°ƒè¯•æ¨¡å¼
        function toggleDebug() {
            debugMode = !debugMode;
            console.log('ğŸ› è°ƒè¯•æ¨¡å¼:', debugMode ? 'å¼€å¯' : 'å…³é—­');
        }
        
        // æ¸…ç©ºæ§åˆ¶å°
        function clearConsole() {
            console.clear();
            console.log('ğŸ§¹ æ§åˆ¶å°å·²æ¸…ç©º');
        }
        
        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            const help = `
ğŸ”§ æç®€è°ƒè¯•ç‰ˆä½¿ç”¨è¯´æ˜ï¼š

ğŸ‘† è§¦æ‘¸/ç‚¹å‡»ï¼š
   â€¢ ç‚¹å‡»å¼€å§‹æŒ‰é’®è¿›å…¥æ¸¸æˆ
   â€¢ è§¦æ‘¸åæ ‡ä¼šå®æ—¶æ˜¾ç¤º
   â€¢ æŒ‰é’®ä½ç½®æœ‰çº¢è‰²è¾¹æ¡†æ ‡è®°

ğŸ› è°ƒè¯•ä¿¡æ¯ï¼š
   â€¢ å·¦ä¸‹è§’æ˜¾ç¤ºå®æ—¶ä¿¡æ¯
   â€¢ åŒ…æ‹¬è§¦æ‘¸åæ ‡ã€é¼ æ ‡ä½ç½®
   â€¢ æŒ‰é’®ä½ç½®å’Œæ¸¸æˆçŠ¶æ€

ğŸ® æ“ä½œï¼š
   â€¢ è§¦æ‘¸/ç‚¹å‡»å¼€å§‹æŒ‰é’®
   â€¢ è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º
   â€¢ æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯æ›´æ–°

ğŸ’¡ æç¤ºï¼š
   â€¢ å¦‚æœçœ‹ä¸åˆ°å…ƒç´ ï¼Œæ£€æŸ¥Canvasæ˜¯å¦æ­£ç¡®åˆ›å»º
   â€¢ è§¦æ‘¸åæ ‡åº”è¯¥ä¸æŒ‰é’®ä½ç½®åŒ¹é…
   â€¢ æ§åˆ¶å°ä¼šæ˜¾ç¤ºæ‰€æœ‰è§¦æ‘¸äº‹ä»¶
            `;
            console.log(help);
            alert('å¸®åŠ©ä¿¡æ¯å·²è¾“å‡ºåˆ°æ§åˆ¶å°');
        }
        
        // æ›´æ–°çŠ¶æ€ä¿¡æ¯
        function updateStatus() {
            if (gameInstance) {
                // è§¦æ‘¸åæ ‡
                if (gameInstance.touchX !== undefined) {
                    document.getElementById('touchCoords').textContent = 
                        `${gameInstance.touchX}, ${gameInstance.touchY}`;
                }
                
                // é¼ æ ‡åæ ‡
                if (gameInstance.mouseX !== undefined) {
                    document.getElementById('mouseCoords').textContent = 
                        `${gameInstance.mouseX}, ${gameInstance.mouseY}`;
                }
                
                // æŒ‰é’®ä½ç½®
                if (gameInstance.getStartButtonRect) {
                    const button = gameInstance.getStartButtonRect();
                    document.getElementById('buttonPos').textContent = 
                        `(${button.x}, ${button.y}) ${button.width}x${button.height}`;
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨æ¸¸æˆ
        window.addEventListener('load', () => {
            console.log('ğŸ“± é¡µé¢åŠ è½½å®Œæˆï¼Œå¯åŠ¨æç®€è°ƒè¯•ç‰ˆ...');
            startGame();
            
            // å®šæœŸæ›´æ–°çŠ¶æ€
            setInterval(updateStatus, 100);
        });
        
        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'r':
                case 'R':
                    restartGame();
                    break;
                case 'd':
                case 'D':
                    toggleDebug();
                    break;
                case 'c':
                case 'C':
                    clearConsole();
                    break;
                case 'h':
                case 'H':
                    showHelp();
                    break;
            }
        });
    </script>
    
    <!-- å¯¼å…¥æç®€è°ƒè¯•ç‰ˆ -->
    <script src="simple_debug.js"></script>
</body>
</html>
